{"version":3,"sources":["../../src/main/json-multipart-related-interceptor.ts"],"names":[],"mappings":";AACA,yDAAsF;AACtF,+CAA6C;AAE7C;IAII,yCAAmB,WAAkE;QAAlE,4BAAA,EAAA,cAA2B,gCAAW,CAAC,OAAO,CAAC,kBAAkB,CAAC;QACjF,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,CAAC;IAEM,iDAAO,GAAd,UAAe,OAA2B;QACtC,IAAI,gBAAgB,GAAG,IAAI,qCAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9D,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,OAAO,GAAG,IAAI,0BAAW,EAAE,CAAC,cAAc,CAAC,IAAI,EAAE,UAAA,IAAI;YACrD,gBAAgB,CAAC,OAAO,CAAC,IAAI,yBAAI,CAAC,IAAI,EAAE,gCAAW,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;YAChG,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;QACH,gBAAgB,CAAC,WAAW,CAAC,IAAI,yBAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAAC;QAC/F,OAAO,CAAC,OAAO,GAAG,gBAAgB,CAAC,MAAM,EAAE,CAAC;QAC5C,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IAEL,sCAAC;AAAD,CApBA,AAoBC,IAAA;AApBY,0EAA+B","file":"json-multipart-related-interceptor.js","sourcesContent":["import { Interceptor, HttpRequestMessage, HttpResponseMessage } from \"aurelia-http-client\";\nimport { MultipartRelated, Part, ContentType, HttpHeaders } from \"aurelia-http-utils\";\nimport { JsonEncoder } from \"./json-encoder\";\n\nexport class JsonMultipartRelatedInterceptor implements Interceptor {\n\n    private contentType: ContentType;\n\n    public constructor(contentType: ContentType = ContentType.valueOf(\"application/json\")) {\n        this.contentType = contentType;\n    }\n\n    public request(message: HttpRequestMessage): HttpRequestMessage {\n        let multipartRelated = new MultipartRelated(this.contentType);\n        let partId = 0;\n        let encoder = new JsonEncoder().withSerializer(File, file => {\n            multipartRelated.addPart(new Part(file, ContentType.valueOf(file.type)), (++partId).toString());\n            return partId.toString();\n        });\n        multipartRelated.addRootPart(new Part(encoder.encode(message.content), this.contentType), \"/\");\n        message.content = multipartRelated.toBlob();\n        return message;\n    }\n\n}\n"]}